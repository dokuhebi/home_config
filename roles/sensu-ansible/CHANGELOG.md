# Change Log
All notable changes to this project will be documented in this file.

This project adheres to [Semantic Versioning](http://semver.org/)
The format is based on [Keep a Changelog](http://keepachangelog.com/).

## [Unreleased]
### Fixed
- Issue that prevented older OS such as CentOS 5 from installing the Sensu RPM package as they are unsigned (@smbambling)
- Security issue with redis.json being world readable, as it can contain sensitive information (@smbambling)
- Issue with conf.d that limited access and prevent automated tests from passing (@smbambling)

### Added
- Support for keepalive attributes: handlers and thresholds (warning/critical) in client.json (@smbambling)
- Support for managing safe_mode in client.json (@smbambling)

## [2.2.0] - 2018-02-22
### Added
- Fedora support. Tested in the wild on Fedora 25 as a client and Fedora 27 on the test suite as both master and client. (@danragnar)
    - `tasks/Fedora/redis.yml`, `tasks/Fedora/rabbit.yml`: Based on CentOS equivalents but with dnf module instead of yum
    - `tasks/Fedora/main.yml`, `tasks/Fedora/dashboard.yml`: links to Centos files
    - `vars/Fedora.yml`: vars for Fedora

### Changed
- `tasks/CentOS/dashboard.yml`, `tasks/CentOS/main.yml`: Use generic package module to support Fedora (@danragnar)

## [2.1.0]
### Fixed
- `defaults/main.yaml`,`tasks/plugins.yml`: Fix Python 3.X compatability issue when checking the contents of sensu_remote_plugins. (@danragnar)

### Added
- `templates/sensu-api-json.j2`, `templates/uchiwa_config.json.j2`: Check for explicitly defining uchiwa_users and sensu_api_user_name as empty to disable authentication, useful when having a reverse proxy handling auth in front of the API and/or the uchiwa dashboard (@danragnar)
- `tasks/rabbit.yml`: Consistency of remote_src option for rabbitmq and sensu when copying SSL cert/key files. Useful if certificates are generated by another CA (e.g. FreeIPA) on the sensu host. (@danragnar)

## [2.0.0] - 2018-02-07
### Breaking Change
- Split up the variables used to determine if a host gets rabbitmq/redis for more flexibility in deployments. (@tculp) `sensu_deploy_rabbitmq` and `sensu_deploy_redis` are now `sensu_deploy_rabbitmq_server` and `sensu_deploy_redis_server` respectively.  See the [role variable documentation](https://github.com/sensu/sensu-ansible/blob/master/docs/role_variables.md) for details on the parameters.
- Redis on Ubuntu will now be configured to bind to `0.0.0.0` to ensure accessiblity and to match the other supported OS configurations. (@tculp)
- Updated the supported Ansible version to the last two stable releases (currently that's Ansible 2.3 and 2.4). (@jaredledvina) Please note that we have not explicitly broken support for running this role on versions of Ansible <2.3. However, we will only be actively supporting the last two stable Ansible releases to reduce the maintenance burden.

### Added
- Initial support for OpenBSD! (@smbambling)
- Ubuntu now get's `apt-transport-https` installed to support HTTPS repos. (@kevit)
- Default to HTTPS APT repos.  @jaredledvina
- Allow for configuring when a node gets the `sensu-client` config file. (@tculp)
- Allow for deploying client definitions based on groups. (@tculp)
- Default to HTTPS Yum repo's and install the Yum key for package signing validation via HTTPS.  (@jaredledvina)
- Used HTTPS for APT key.  (@jaredledvina)
- Amazon Linux has proper yum repo configured and supports Amazon Linux 2. (@romainrbr)
- Yum based distros now get EPEL to support installing a newer and supported version of RabbitMQ. (@romainrbr)
- CentOS now supports using Bintray mirrors for installing RabbitMQ to work around Erlang issues with older versions. (@romainrbr)
- All PRs are now required to pass TravisCI integrations tests.  (@jaredledvina)
- Ensure that we configure the `mode` and `umask` for files to work in a more restrictive environment. (@roumano)
- Debian and Ubuntu switch to Bintray for RabbitMQ to match yum distros. (@jaredledvina)

### Changed
- Switched from Gitter to `#ansible` in the Sensu Community Slack. (@grepory)
- Bumped SSL tools version to 1.2 by default. (@marji)
- Update 'Generate SSL Certs' to support Ansible 2.4. (@tculp)

## [1.2.0] - 2017-05-13
### Added
- RedHat support
- Sensu enterprise support
  - Adds a few other minor features as well, such as the ability to toggle rabbitmq's SSL
- Uchiwa HA support

### Changed
- Rely on the existing sensu repositories to install Uchiwa
- Use the FreeBSD repository
- Update documentation to note Ubuntu 15's EOL
- Allow overriding the use of EPEL on CentOS/RedHat

### Fixed
- Make sure any local directories that are assumed to exist actually do

## [1.1.0] - 2017-04-03
### Added
- Toggle for SSL cert management

### Changed
- Updated repository URLs and versions for all platforms

### Fixed
- Fixed behaivor changed by recent versions of Ansible

## 1.0.0 - 2017-02-14

First tagged release, starting at 1.0.0 since the project can be considered stable at this point.

[Unreleased]: https://github.com/sensu/sensu-ansible/compare/2.2.0...HEAD
[2.2.0]: https://github.com/sensu/sensu-ansible/compare/2.1.0...2.2.0
[2.1.0]: https://github.com/sensu/sensu-ansible/compare/2.0.0...2.1.0
[2.0.0]: https://github.com/sensu/sensu-ansible/compare/1.2.0...2.0.0
[1.2.0]: https://github.com/sensu/sensu-ansible/compare/1.1.0...1.2.0
[1.1.0]: https://github.com/sensu/sensu-ansible/compare/1.0.0...1.1.0
